# 6.26
项目记录
统一使用vscode进行开发
初步定为组长创建新建项目再把其他组员加入协作者
初步定下来做类似C语言的编译
先做一个简单的语言将各个部分的功能模块串通起来之后再对文法进行完善
第一代文法中包含的内容：
变量定义 整形 字符型 字符串型
*函数定义和调用
表达式 算术表达式 赋值表达式 逻辑表达式
if+while+goto+label

分工
文法设计 ：文法+翻译文法
刘文兴 蒙龙：文法设计+语法分析+语义分析+中间代码生成
张翰韬 钟洁：词法分析+优化+目标代码生成

# 6.29
今天是第一次上机，我们重新进行了一次分工，现在的分工情况是我和钟洁同学负责后端，包括优化和目标代码生成的部分，目标代码使用汇编语义进行。前端部分由张翰韬和刘文兴两位同学负责，包括词法分析，语法分析和语义分析。

今天经过语言讨论我们初步确定了文法的设计，文法中的第一代的内容里面暂时先没有了函数的定义和调用，只有main的，也去掉了goto和label。原本是将文法的各个部分分给每个同学来做的，但是张翰韬同学似乎一下子就写出来了。

晚上我们进行了词法分析的和符号表的讨论和初步的开发工作，主要是由张翰韬同学来做，在语法分析中调用词法分析的来获得一个一个TOKEN，但是现在的做法是先词法分析得到所有的TOKEN，放在一个vector里面，然后再一个个地读，如果是每调用一次再读一个TOKEN的方式也可以，但是返回的时候文件流不能关闭，就是源文件的文件流需要在语法分析中打开。但是现在采用的方式虽然是一次性生成完所有的TOKEN，但是也可以一个一个地读。

TOKEN的中包含的内容为一个类型和name，我记得但是课上讲过虽然现在是name但是实际应该是指向符号表中的指针，但是在词法分析时候似乎不能完成完整的符号表，关键字表和界符表可以完成，但是含类型表函数表总表的内容应该是在进行语法分析的时候再来进行确定会方便一点，现在暂定是TOKEN进行初步类别标明为关键字 标识符 界符和常数，但还没完成，等张把代码推上了我们在来一次看

# 6.30
初步完成了文法的设计，我们原本在29号晚上完成了文法的初步设计，但是当时没用留意到有些地方不是LL1的，这个问题我是有责任的，设计文法的时候有一些很明显的错误没有意识到，我们后来就直接开始设计翻译文法，完成了语义动作的插入工作，但是还没有很规范的系统地写出来，但是后来在实际做递归下降子程序的时候发现文法有问题，发现有些地方不是LL1的后来花了挺多时间来更改这一部分，对开发的进度影响还是挺大的。

同时我完成了符号表的设计，在课件的符号表的基础上添加了标识符表，用来语法分析时候判断重复定义以及赋值的时候类型是否统一，但是要注意作用域，和队友商量了之后任务符号表的主要的填写还是在语法分析中进行，在词法分析的时候生成的TOKEN只做简单的分类。符号表的具体填写在做语法分析的时候再来插入会方便很多。

如果之后考虑到函数的定义和调用的话，变量实际上存放的地方应该是在活动记录中，课件上说活动记录是内存单元的一个映射，但是我感觉实际存放在活动记录中也未尝不可，或者说内存中应当由活动记录的结构，活动记录应该是在运行过程中分配，因为不知道会调用多少次，如果一部分事先已经知道了会调用多少次的话就可以提前分配好内存，计算出函数的所有的需要开辟多少的内存空间，但是如果是运行过程中分配的话是不是要在四元式和目标代码生成中生成维护内存的四元式或指令，但是汇编语言并没有动态分配内存的方法，最坏情况下要写一个内存管理的机制。

词法分析基本上完成了，并且也开始了语法分析的工作。